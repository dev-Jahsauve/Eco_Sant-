<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inscription - MediConnect</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Open+Sans:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css.css">
</head>
<body>
    <!-- Toast notifications container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-heartbeat"></i>
                    </div>
                    <div class="logo-text">Eco-Santé</div>
                </div>
                <nav>
                    <ul>
                        <li><a href="./index.html">Accueil</a></li>
                        <li><a href="index.html#about">À propos</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <!-- Formulaire d'inscription -->
    <div class="auth-container">
        <div class="auth-form">
            <h2>Inscription</h2>
            <div class="form-group">
                <label for="fullname">Nom complet</label>
                <input type="text" id="fullname" placeholder="Votre nom complet" required>
            </div>
            <div class="form-group">
                <label for="register-email">Email</label>
                <input type="email" id="register-email" placeholder="Votre adresse email" required>
            </div>
            <div class="form-group">
                <label for="register-password">Mot de passe</label>
                <input type="password" id="register-password" placeholder="Créez un mot de passe" required minlength="6">
            </div>
            <div class="form-group">
                <label for="confirm-password">Confirmer le mot de passe</label>
                <input type="password" id="confirm-password" placeholder="Confirmez votre mot de passe" required>
            </div>
            <div class="form-group">
                <label for="specialite">Spécialité</label>
                <input type="text" id="specialite" placeholder="Votre spécialité médicale" required>
            </div>
            <div class="form-group">
                <label for="phone">Téléphone</label>
                <input type="tel" id="phone" placeholder="Votre numéro de téléphone" required>
            </div>
            <div class="user-type">
                <label>
                    <input type="radio" name="user-type" value="medecin" checked> Médecin
                </label>
                <label>
                    <input type="radio" name="user-type" value="naturopathe"> Naturopathe
                </label>
            </div>
            <button class="btn" style="width: 100%;" id="register-btn">
                <i class="fas fa-user-plus"></i> <span id="register-text">S'inscrire</span>
            </button>
            <p style="text-align: center; margin-top: 24px;">
                Déjà inscrit ? <a href="login.html" id="show-login">Se connecter</a>
            </p>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>MediConnect</h3>
                    <p>Plateforme de téléconsultation médicale pour des soins accessibles à tous.</p>
                </div>
                <div class="footer-section">
                    <h3>Liens rapides</h3>
                    <a href="index.html">Accueil</a>
                    <a href="index.html#about">À propos</a>
                    <a href="#">Contact</a>
                </div>
                <div class="footer-section">
                    <h3>Contact</h3>
                    <p>contact@mediconnect.fr</p>
                    <p>+33 1 23 45 67 89</p>
                    <p>123 Avenue de la Santé, Paris</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 MediConnect. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <script src="java.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Vérifier si l'utilisateur est déjà connecté
            redirectIfLoggedIn();

            // Inscription
            document.getElementById('register-btn').addEventListener('click', function() {
                const fullname = document.getElementById('fullname').value;
                const email = document.getElementById('register-email').value;
                const password = document.getElementById('register-password').value;
                const confirmPassword = document.getElementById('confirm-password').value;
                const specialite = document.getElementById('specialite').value;
                const phone = document.getElementById('phone').value;
                const userType = document.querySelector('input[name="user-type"]:checked').value;
                
                if (!fullname || !email || !password || !confirmPassword || !specialite || !phone) {
                    showToast('error', 'Erreur', 'Veuillez remplir tous les champs');
                    return;
                }
                
                if (password !== confirmPassword) {
                    showToast('error', 'Erreur', 'Les mots de passe ne correspondent pas');
                    return;
                }
                
                // Vérifier si l'email est déjà utilisé
                if (userAccounts.find(user => user.email === email)) {
                    showToast('error', 'Erreur', 'Cet email est déjà utilisé');
                    return;
                }
                
                // Simuler un chargement
                const registerText = document.getElementById('register-text');
                registerText.innerHTML = '<div class="spinner"></div> Inscription...';
                
                setTimeout(function() {
                    // Créer l'objet utilisateur
                    const userData = {
                        fullname,
                        email,
                        password,
                        specialite,
                        phone,
                        type: userType
                    };
                    
                    // Enregistrer l'utilisateur
                    if (registerUser(userData)) {
                        currentUser = userData;
                        localStorage.setItem('mediconnect_current_user', JSON.stringify(userData));
                        
                        showToast('success', 'Inscription réussie', 'Redirection vers votre espace...');
                        
                        // Redirection vers le dashboard
                        setTimeout(() => {
                            window.location.href = 'dashboard.html';
                        }, 1500);
                    } else {
                        showToast('error', 'Erreur', 'Une erreur est survenue lors de l\'inscription');
                    }
                    
                    // Réinitialiser le texte du bouton
                    registerText.textContent = 'S\'inscrire';
                }, 1500);
            });
        });
    </script>
</body>
</html>